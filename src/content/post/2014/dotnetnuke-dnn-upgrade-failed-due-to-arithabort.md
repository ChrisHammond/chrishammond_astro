---
title: "DotNetNuke (DNN) upgrade failed due to 'ARITHABORT'"
author: Chris Hammond
publishDate: 2014-06-14T01:41:05
updateDate: 2014-06-14T01:41:05
tags: [ 'DNN', 'DNNCMS', 'DotNetNuke', 'Errors', 'Fix', 'Open Source', 'SQL', 'Upgrade' ]
excerpt: "With the release of DNN 7.3.0 this week, it was time for me to get my sites upgraded. I upgraded most of the sites without any issues, but wanted to point out a few errors that I received on sites, and how I resolved them. The very first upgrade I did started out bad, it was for this site, and while the upgrade was 100% successful, as soon as I tried to load the site I got a generic 500 error. Accessing the site from the webserver gave me a little more information, seen below, but not much."
url: /2014/dotnetnuke-dnn-upgrade-failed-due-to-arithabort  # Use the generated URL with year
---
<p>With the release of DNN 7.3.0 this week, it was time for me to get my sites upgraded. I upgraded most of the sites without any issues, but wanted to point out a few errors that I received on sites, and how I resolved them.</p> <p>The very first upgrade I did started out bad, it was for this site, and while the upgrade was 100% successful, as soon as I tried to load the site I got a generic 500 error. Accessing the site from the webserver gave me a little more information, seen below, but not much.</p> <blockquote> <p>500 Internal Server Error <br />The requested Url does not return any valid content. <br />Administrators<br />Change this message by configuring a specific 404 Error Page or Url for this website.</p></blockquote> <p>The first thing I did was run to <a href="https://www.ifinity.com.au">www.ifinity.com.au</a> to see if Bruce had a new version of his URLMaster module available. Sure enough, he had one that was released today, so I needed to get that installed. But how do you install a DNN Module when you can’t actually access the DNN website (due to that 500 error above)? You take the ZIP file for the module/extension you want to install, and put it in the /install/module folder in the root of your website. </p> <p>Once you’ve placed the file in that directory, browse to <a href="https://DNNDEV.me/install/install.aspx?mode=installresources">https://DNNDEV.me/install/install.aspx?mode=installresources</a> (replace DNNDEV.ME with your domain name).&nbsp; That should install the upgraded Ifinity package and resolve the 500 error.</p> <p>Another problem I ran into was that one of my sites, upgrading from 7.1.1 to 7.3.0, received errors on the 7.2.0, 7.2.1, 7.2.2 and 7.3.0 SQL upgrade scripts, the errors were all something like </p> <blockquote> <p>System.Data.SqlClient.SqlException (0x80131904): ALTER TABLE failed because the following SET options have incorrect settings: 'ARITHABORT'. Verify that SET options are correct for use with indexed views and/or indexes on computed columns and/or filtered indexes and/or query notifications and/or XML data type methods and/or spatial index operations.</p></blockquote> <p>That one was actually a pretty easy fix, basically in the SQL database options (using SQL Server Management Studio) there is a Database Compatibility option. The site that had the problem was set to SQL 2000! Not sure how that happened, but it was an easy fix. I set compatibility to 2005 (as that is what all my other DBs were at) and ran the upgrades again (after restoring my backups) and everything ran fine the second time around.</p> <p>The last thing you’ll find is that if you have any CSS in your Portal.css file, in 7.3.0, the Portal.CSS file is <strong>TURNED OFF BY DEFAULT</strong>. Whomever the genius was that made that call at DNN Corp should really be fired. You can turn portal.css back on in the site settings, under the Stylesheet Editor TAB.</p> <p>Besides those few issues, all addressable with a little effort this evening, I’m pretty happy with the 7.3 upgrade. The <a href="https://cjh.am/1mGBQby" target="_blank">HammerFlex</a> skin works great without any tweaks for 7.3 in my testing so far, <a href="https://cjh.am/1mGBQby" target="_blank">you can download that from the DNNStore for free</a>.</p>
