---
title: "Part 4, Getting the conversion tables ready for CS to DNN"
author: Chris Hammond
publishDate: 2011-01-28T02:04:13
updateDate: 2011-01-28T02:04:13
tags: []
excerpt: "This is the fourth post in a series of blog posts about converting from CommunityServer to DotNetNuke.  A brief background: I had a number of websites running on CommunityServer 2.1, I decided it was finally time to ditch CommunityServer due to the change in their licensing model and pricing that made it not good for the small guy. This series of blog posts is about how to convert your CommunityServer based sites to DotNetNuke.  Previous Posts:   Part 1: An Introduction    Part 2: DotNetNuke Installation    Part 3: Converting users from CommunityServer to DotNetNuke  This is Part 4, Getting the conversion tables ready for CS to DNN"
url: /2011/part-4-getting-the-conversion-tables-ready-for-cs-to-dnn  # Use the generated URL with year
---
<p>This is the fourth post in a series of blog posts about converting from CommunityServer to DotNetNuke.</p> <p>A brief background: I had a number of websites running on CommunityServer 2.1, I decided it was finally time to ditch CommunityServer due to the change in their licensing model and pricing that made it not good for the small guy. This series of blog posts is about how to convert your CommunityServer based sites to <a href="https://www.dotnetnuke.com/">DotNetNuke</a>.</p> <p>Series of Posts:   <br /> <a href="https://www.dnndaily.com/tips/itemId/33060/Converting-From-CommunityServer-to-DotNetNuke-Intr.aspx">Part 1: An Introduction</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33098/CommunityServer-to-DotNetNuke-Part-2-DotNetNuke-I.aspx">Part 2: DotNetNuke Installation</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33102/Part-3-Converting-users-from-CommunityServer-to-D.aspx">Part 3: Converting users from CommunityServer to DotNetNuke</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33114/Part-4-Getting-the-conversion-tables-ready-for-CS.aspx">Part 4: Getting the conversion tables ready for CS&nbsp; to DNN</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33123/Part-5-Moving-Forum-threads-from-CommunityServer.aspx" target="_blank">Part 5: Moving Forum threads from CommunityServer to DotNetNuke</a><br /> <a href="https://www.dnndaily.com/tips/itemId/33327/Part-6-Community-Server-to-DotNetNuke-Moving-Foru">Part 6, Community Server to DotNetNuke Moving Forum replies and attachments</a><br /> <a href="https://www.dnndaily.com/tips/itemId/33750/Part-7-CommunityServer-to-DotNetNuke-handling-URL">Part 7: CommunityServer to DotNetNuke handling URLs</a></p> <p><strong>This is Part 4, Getting the conversion tables ready for CS to DNN</strong></p> <p>In the previous blog post we talked about our first conversion SQL Script. We skipped over a couple of sections in that SQL Script as we only focused on the User conversion that was going on in there. In this blog post we're going to talk about the other things going on in the script.</p> <p>First things first, you can find the scripts on the codeplex project <a href="https://cstodnn.codeplex.com/">https://cstodnn.codeplex.com/</a></p> <p>This first script, besides bringing users over into DotNetNuke, configures a few tables that we are going to use in the latter scripts, and in our URL handling later on, to match up the data from CommunityServer Forums and Users to DotNetNuke Forums and Users. </p> <p>The script starts off by deleting three tables</p> <li>[TARGETDB].[dbo].[conversion_users] &ndash; mapping CS user ids to DotNetNuke user ids </li> <li>[TARGETDB].[dbo].[conversion_forums] &ndash; mapping CS forum ids to DotNetNuke forum ids. </li> <li>[TARGETDB].[dbo].[cs_forums_topics] &ndash; mapping CS forum post ids to DotNetNuke forum post ids. <p>It then creates those three tables. They are pretty basic tables, take a look at the script for more details on the columns in each one. From there the script deals mostly with users for a while (<a href="https://www.dnndaily.com/tips/itemId/33102/Part-3-Converting-users-from-CommunityServer-to-D.aspx">See post #3</a>) until we get commented section for &ldquo;Get Forum Groups.</p> <p>This section of the script gets all of the Forum &ldquo;Groups&rdquo; from CommunityServer and pulls them over into the DotNetNuke Forum_Groups table. These are just for grouping forums, which we pull over next. The Forums themselves are pulled into Forum_Forums with their corresponding group IDs.</p> <p>After that we start populating the Conversion tables, mapping user ids, and forum ids. We don't use the cs_forum_topics table until the later SQL scripts. The very last thing done in this script is to create a stored procedure called Forum_Post_Add_Conversion. This script will get used in the later scripts as we go through and import forum posts. This PROC is slightly different than the standard Forum_Post_Add stored procedure, tweaked slightly to make it work with the import process. </p> <p>Once the conversion itself is done you could delete the procedure. You won't be deleting the Conversion tables though anytime soon, in a future blog post we'll show you how we use those for handling all the old CommunityServer URLs and mapping them to DotNetNuke URLs.</p> </li>
