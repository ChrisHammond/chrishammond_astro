---
title: "Part 5, Moving Forum threads from CommunityServer to DotNetNuke"
author: Chris Hammond
publishDate: 2011-02-06T01:19:12
updateDate: 2011-02-06T01:19:12
tags: []
excerpt: "Learn how to move Forum threads from CommunityServer to DotNetNuke in Part 5 of our series. Find out about the CsToDNN_2.sql script and the importing process."
url: /2011/part-5-moving-forum-threads-from-communityserver-to-dotnetnuke  # Use the generated URL with year
---
<p>This is the fifth post in a series of blog posts about converting from CommunityServer to DotNetNuke.</p> <p>A brief background: I had a number of websites running on CommunityServer 2.1, I decided it was finally time to ditch CommunityServer due to the change in their licensing model and pricing that made it not good for the small guy. This series of blog posts is about how to convert your CommunityServer based sites to <a href="https://www.dotnetnuke.com/">DotNetNuke</a>.</p> <p>Series of Posts:   <br /> <a href="https://www.dnndaily.com/tips/itemId/33060/Converting-From-CommunityServer-to-DotNetNuke-Intr.aspx">Part 1: An Introduction</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33098/CommunityServer-to-DotNetNuke-Part-2-DotNetNuke-I.aspx">Part 2: DotNetNuke Installation</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33102/Part-3-Converting-users-from-CommunityServer-to-D.aspx">Part 3: Converting users from CommunityServer to DotNetNuke</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33114/Part-4-Getting-the-conversion-tables-ready-for-CS.aspx">Part 4: Getting the conversion tables ready for CS&nbsp; to DNN</a>    <br /> <a href="https://www.dnndaily.com/tips/itemId/33123/Part-5-Moving-Forum-threads-from-CommunityServer.aspx" target="_blank">Part 5: Moving Forum threads from CommunityServer to DotNetNuke</a><br /> <a href="https://www.dnndaily.com/tips/itemId/33327/Part-6-Community-Server-to-DotNetNuke-Moving-Foru">Part 6, Community Server to DotNetNuke Moving Forum replies and attachments</a><br /> <a href="https://www.dnndaily.com/tips/itemId/33750/Part-7-CommunityServer-to-DotNetNuke-handling-URL">Part 7: CommunityServer to DotNetNuke handling URLs</a></p> <p><strong>This is Part 5, bringing over Forum Threads</strong></p> <p>If you haven't read the previous posts I would recommend that! This blog talks about CsToDNN_2.sql, and assumes you have already replaced the various strings discussed in <a href="https://www.dnndaily.com/tips/itemId/33102/Part-3-Converting-users-from-CommunityServer-to-D.aspx" target="_blank">Part 3</a>. The CsToDNN_2.sql script is used to pull over the Forum threads, replies are pulled over in the CsToDNN_3.sql script (future blog post)</p> <p>The script starts out by getting the number of threads we're going to need to loop through. Next we truncate a table called cs_forums_topics, this table is used for keeping track of the CommunityServer PostId and the DotNetNuke TopicId. This will be important during the importing process, and also after we've got our DotNetNuke site running so that we can properly map the old CommunityServer URLs to DotNetNuke.</p> <p>After truncating the table we go through and PostIDs from CommunityServer, at this point we're just populating that table, nothing more. Later in the script, and the CsToDNN_3 script we will be updating the cs_forums_topics table with the matching id.</p> <p>After populating that table the script then primes the first post to import, setting up a number of variables that we're going to use when populating the DNN Forum module. At this point the script does a while loop, initially inserting the primed forum post into DNN using the Forum_Post_Add_Conversion script that we created in the CsToDNN_1.sql script. After adding the forum thread the script updates the cs_forums_topics table, and then the loop primes the next thread to add before starting the loop over. This while loop will repeat until all of the threads are imported.</p> <p>With my forum which had around 40k threads, this script ran fairly quickly, 5-10 minutes if I recall correctly (it's been a few months). </p> <p><strong>Side note</strong>: while reviewing the scripts for this post I noticed that there were a few things that needed changing, so I checked in new changes. After I'm done with this series I will do a new release of the CsToDNN package, until then check out the <a href="https://cstodnn.codeplex.com/SourceControl/list/changesets" target="_blank">Source page</a>.</p>

